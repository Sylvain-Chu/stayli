{{> header }}
{{> sidebar }}

<h1>Create an invoice</h1>
{{#if bookings.length}}
  {{#if errors}}
    <div class='alert alert-error'>
      <ul>
        {{#each errors}}
          <li>{{this}}</li>
        {{/each}}
      </ul>
    </div>
  {{/if}}
  <form method='post' action='/invoices/create'>
    <div>
      <label for='bookingId'>Booking</label>
      <select id='bookingId' name='bookingId' required>
        <option value='' disabled {{#unless payload.bookingId}}selected{{/unless}}>Select an eligible booking</option>
        {{#each bookings}}
          <option value='{{this.id}}' {{#if (eq this.id ../payload.bookingId)}}selected{{/if}}>
            {{this.property.name}}
            —
            {{this.client.firstName}}
            {{this.client.lastName}}
            — from
            {{date this.startDate}}
            to
            {{date this.endDate}}
          </option>
        {{/each}}
      </select>
    </div>
    <div>
      <label for='dueDate'>Due date</label>
      <input type='date' id='dueDate' name='dueDate' value='{{payload.dueDate}}' required />
    </div>
    <div>
      <label for='amount'>Amount</label>
      <input type='number' id='amount' name='amount' min='0' step='0.01' value='{{payload.amount}}' required />
    </div>
    <button type='submit'>Create</button>
  </form>
{{else}}
  <p>No eligible booking available. Create a booking without an invoice to be able to issue one.</p>
{{/if}}

{{> footer }}