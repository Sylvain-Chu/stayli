{{> header }}
{{> sidebar }}

<div class="page-header">
  <div class="page-header-left">
    <a href="/properties" class="btn btn-ghost btn-back">
      <span data-feather="arrow-left"></span>
      <span>{{t 'common.back'}}</span>
    </a>
    <h1>{{property.name}}</h1>
  </div>
  <div class="page-actions">
    <a href="/properties/{{property.id}}/edit" class="btn btn-primary">
      <span data-feather="edit-2"></span>
      <span>{{t 'common.edit'}}</span>
    </a>
    <button 
      data-delete 
      data-id="{{property.id}}" 
      data-base="/properties" 
      data-confirm="{{t 'properties.confirmDelete'}}"
      class="btn btn-danger">
      <span data-feather="trash-2"></span>
      <span>{{t 'common.delete'}}</span>
    </button>
  </div>
</div>

<div class="detail-container">
  <!-- Property Information Card -->
  <div class="detail-card">
    <div class="card-header">
      <h2>{{t 'properties.propertyInfo'}}</h2>
    </div>
    <div class="card-body">
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">
            <span data-feather="home"></span>
            {{t 'properties.name'}}
          </div>
          <div class="info-value">{{property.name}}</div>
        </div>

        {{#if property.address}}
        <div class="info-item">
          <div class="info-label">
            <span data-feather="map-pin"></span>
            {{t 'properties.address'}}
          </div>
          <div class="info-value">{{property.address}}</div>
        </div>
        {{/if}}

        {{#if property.description}}
        <div class="info-item">
          <div class="info-label">
            <span data-feather="file-text"></span>
            {{t 'properties.description'}}
          </div>
          <div class="info-value">{{property.description}}</div>
        </div>
        {{/if}}

        <div class="info-item">
          <div class="info-label">
            <span data-feather="dollar-sign"></span>
            {{t 'properties.pricePerNight'}}
          </div>
          <div class="info-value">{{currency property.pricePerNight}}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bookings Card -->
  <div class="detail-card">
    <div class="card-header">
      <h2>{{t 'properties.bookings'}}</h2>
      <span class="badge badge-info">{{property.bookings.length}}</span>
    </div>
    <div class="card-body">
      {{#if property.bookings}}
        <div class="bookings-list">
          {{#each property.bookings}}
            <a href="/bookings/{{this.id}}" class="booking-item">
              <div class="booking-info">
                <div class="booking-property">
                  <span data-feather="user"></span>
                  {{#if this.client}}
                    {{this.client.firstName}} {{this.client.lastName}}
                  {{else}}
                    {{t 'clients.noClient'}}
                  {{/if}}
                </div>
                <div class="booking-dates">
                  <span data-feather="calendar"></span>
                  {{formatDate this.startDate}} â†’ {{formatDate this.endDate}}
                </div>
                <div class="booking-price">
                  <span data-feather="dollar-sign"></span>
                  {{currency this.totalPrice}}
                </div>
              </div>
              <div class="booking-status">
                {{#if (eq this.status 'confirmed')}}
                  <span class="badge badge-success">{{t 'bookings.statusConfirmed'}}</span>
                {{else if (eq this.status 'pending')}}
                  <span class="badge badge-warning">{{t 'bookings.statusPending'}}</span>
                {{else if (eq this.status 'cancelled')}}
                  <span class="badge badge-danger">{{t 'bookings.statusCancelled'}}</span>
                {{else if (eq this.status 'completed')}}
                  <span class="badge badge-info">{{t 'bookings.statusCompleted'}}</span>
                {{else}}
                  <span class="badge">{{capitalize this.status}}</span>
                {{/if}}
              </div>
              <span data-feather="chevron-right" class="booking-arrow"></span>
            </a>
          {{/each}}
        </div>
      {{else}}
        <div class="empty-state-small">
          <span data-feather="calendar"></span>
          <p>{{t 'properties.noBookings'}}</p>
        </div>
      {{/if}}
    </div>
  </div>
</div>

{{> footer }}