{{> header }}
{{> sidebar }}

<h1>{{t 'invoices.createTitle'}}</h1>
{{#if bookings.length}}
  {{#if errors}}
    <div class='alert alert-error'>
      <ul>
        {{#each errors}}
          <li>{{this}}</li>
        {{/each}}
      </ul>
    </div>
  {{/if}}
  <form method='post' action='/invoices/create'>
    <div>
  <label for='bookingId'>{{t 'invoices.bookingLabel'}}</label>
      <select id='bookingId' name='bookingId' required>
  <option value='' disabled {{#unless payload.bookingId}}selected{{/unless}}>{{t 'invoices.selectEligibleBooking'}}</option>
        {{#each bookings}}
          <option value='{{this.id}}' {{#if (eq this.id ../payload.bookingId)}}selected{{/if}}>
            {{this.property.name}}
            —
            {{this.client.firstName}}
            {{this.client.lastName}}
            — {{t 'invoices.from'}}
            {{date this.startDate}}
            {{t 'invoices.to'}}
            {{date this.endDate}}
          </option>
        {{/each}}
      </select>
    </div>
    <div>
      <label for='dueDate'>{{t 'invoices.dueDateLabel'}}</label>
      <input type='date' id='dueDate' name='dueDate' value='{{payload.dueDate}}' required />
    </div>
    <div>
      <label for='amount'>{{t 'invoices.amountLabel'}}</label>
      <input type='number' id='amount' name='amount' min='0' step='0.01' value='{{payload.amount}}' required />
    </div>
    <button type='submit'>{{t 'common.create'}}</button>
  </form>
{{else}}
  <p>{{t 'invoices.noEligibleBooking'}}</p>
{{/if}}

{{> footer }}